@{
    ViewData["Title"] = "Doctor Documents";
}

<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Doctor Documents</h4>
        <button class="btn btn-primary" id="btnAddDocument">
            <i class="bi bi-plus-circle"></i> Add Document
        </button>
    </div>

    <div class="mb-3">
        <input type="text" id="quickFilter" class="form-control" placeholder="Search all columns..." />
    </div>

    <!-- ✅ Bootstrap’s overflow-scroll class enables horizontal scroll -->
    <div class="overflow-auto">
        <div id="doctorDocumentsGrid"
             class="ag-theme-alpine"
             style="min-width:1400px; height:600px;"></div>
    </div>
</div>


<!-- Add/Edit Modal -->
<div class="modal fade" id="addDocumentModal" tabindex="-1" aria-labelledby="addDocumentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <form id="documentForm" enctype="multipart/form-data" class="needs-validation" novalidate>
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="addDocumentModalLabel">Add Document</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <input type="hidden" id="documentId" name="Id" />

                    <!-- Doctor Dropdown -->
                    <div class="mb-3">
                        <label for="doctorSelect" class="form-label fw-semibold">Doctor</label>
                        <select id="doctorSelect" name="DoctorId" class="form-select" required>
                            <option value="">-- Select Doctor --</option>
                        </select>
                        <div class="invalid-feedback">Please select a doctor.</div>
                    </div>

                    <!-- File Upload -->
                    <div class="mb-3">
                        <label for="fileUpload" class="form-label fw-semibold">Document File</label>
                        <input type="file" class="form-control" id="fileUpload" name="file" accept=".pdf,.jpg,.png,.doc,.docx" required />
                        <div class="invalid-feedback">Please upload a document file.</div>
                    </div>
                </div>

                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Save Document</button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- Edit Document Modal -->
<div class="modal fade" id="editDocumentModal" tabindex="-1" aria-labelledby="editDocumentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <form id="editDocumentForm" enctype="multipart/form-data" class="needs-validation" novalidate>
            @Html.AntiForgeryToken()

            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title" id="editDocumentModalLabel">Edit Document</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <!-- Hidden IDs -->
                    <input type="hidden" id="editDocumentId" name="Id" />
                    <input type="hidden" id="editDoctorId" name="DoctorId" />
                    <input type="hidden" id="editOldFilePath" name="OldFilePath" />
                    <input type="hidden" id="editOldFileName" name="OldFileName" />
                   


                    <!-- Doctor Name (disabled) -->
                    <div class="mb-3">
                        <label for="editDoctorName" class="form-label fw-semibold">Doctor</label>
                        <input type="text" id="editDoctorName" class="form-control" disabled />
                    </div>

                    <!-- File Upload -->
                    <div class="mb-3">
                        <label for="editFileUpload" class="form-label fw-semibold">Upload New Document</label>
                        <input type="file" class="form-control" id="editFileUpload" name="file" accept=".pdf,.jpg,.png,.doc,.docx" required />
                        <div class="invalid-feedback">Please select a file to upload.</div>
                    </div>
                </div>

                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Update Document</button>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script src="~/js/DoctorDocument/doctorDocument.js"></script>
}

